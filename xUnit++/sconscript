Import('env')

targetFile = env['getTargetFile']('xUnit++')
intDir = env['getIntDir']('xUnit++')

local = env.Clone()
local.VariantDir(intDir, 'src/', duplicate = 0)
local.Append(CPPPATH = ['xUnit++'])

# bug in scons? this will fail when doing release builds
if env['debug'] == True:
    targetFile = targetFile + '$LIBSUFFIX'

target = local.StaticLibrary(targetFile, Glob(intDir + '*.cpp'))

Return('target')
